<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UDI</title>

<!-- Font Special Elite -->
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">

<!-- Favicon -->
<link rel="icon" href="favicon.ico">

<style>
    body {
        margin: 0;
        padding: 0;
        font-family: 'Special Elite', monospace;
        background: url('background.png') no-repeat center center fixed;
        background-size: cover;
        overflow-x: hidden;
    }

    /* PASSWORD SCREEN */
    #password-screen {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 10;
        backdrop-filter: blur(3px);
    }

    /* GIF trên cùng */
    #password-screen .gif-top {
        position: absolute;
        top: 50px;
        left: 50%;
        transform: translateX(-50%);
        width: 200px;
        height: auto;
        pointer-events: none;
        z-index: 1;
    }

    #password-screen input {
        padding: 12px;
        font-size: 20px;
        background: rgba(255,255,255,0.1);
        color: white;
        border: 2px solid white;
        border-radius: 12px;
        outline: none;
        font-family: 'Special Elite';
        text-align: center;
        margin-bottom: 20px;
        width: 250px;
        position: relative;
        z-index: 2;
        backdrop-filter: blur(6px);
    }

    #password-screen button {
        padding: 10px 25px;
        font-size: 20px;
        background: rgba(255,255,255,0.2);
        color: white;
        border: 2px solid white;
        border-radius: 12px;
        cursor: pointer;
        font-family: 'Special Elite';
        position: relative;
        z-index: 2;
        backdrop-filter: blur(4px);
    }

    /* MAIN FORM */
    #main-content {
        display: none;
        position: relative;
        z-index: 5;
        text-align: center;
        padding-top: 100px;
    }

    .form-box {
        position: relative;
        padding: 30px;
        width: 300px;
        margin: auto;
        border: 2px solid rgba(255,255,255,0.7);
        border-radius: 15px;
        background: rgba(0,0,0,0.4);
        backdrop-filter: blur(4px);
    }

    .form-box .gif-top {
        position: absolute;
        top: -80px;
        left: 50%;
        transform: translateX(-50%);
        width: 150px;
        height: auto;
        pointer-events: none;
        z-index: 1;
    }

    .form-box input {
        width: 100%;
        margin-bottom: 15px;
        padding: 12px;
        background: rgba(255,255,255,0.1);
        color: white;
        border: 2px solid white;
        border-radius: 12px;
        outline: none;
        font-size: 16px;
        font-family: 'Special Elite';
        position: relative;
        z-index: 2;
        backdrop-filter: blur(6px);
    }

    .form-box button {
        width: 100%;
        padding: 12px;
        background: rgba(255,255,255,0.2);
        border: 2px solid white;
        border-radius: 12px;
        color: white;
        font-size: 18px;
        cursor: pointer;
        font-family: 'Special Elite';
        position: relative;
        z-index: 2;
    }

    .form-box button:disabled {
        background: rgba(255,255,255,0.1);
        cursor: not-allowed;
    }

    #success-text {
        margin-top: 15px;
        color: #00ffea;
        font-size: 18px;
        display: none;
        position: relative;
        z-index: 2;
    }
</style>
</head>

<body>

<!-- PASSWORD SCREEN -->
<div id="password-screen">
    <img src="your-password-gif.gif" class="gif-top" alt="Password GIF">
    <input type="password" id="passInput" placeholder="Enter Password">
    <button onclick="checkPass()">Enter</button>
</div>

<!-- MAIN FORM -->
<div id="main-content">
    <div class="form-box">
        <img src="IMG_1930.gif" class="gif-top" alt="Form GIF">
        <h2 style="color:white;">Whitelist Form</h2>
        <form id="whitelistForm" action="https://sheetdb.io/api/v1/YOUR_SHEET_ENDPOINT" method="POST">
            <input type="text" id="xInput" name="data[x]" placeholder="Your X (Twitter) Profile" required>
            <input type="text" id="walletInput" name="data[wallet]" placeholder="Your ETH Wallet" required>
            <button type="submit" id="submitBtn">Submit</button>
        </form>
        <div id="success-text">Welcome UDI-verse<br>Good Luck!</div>
    </div>
</div>

<script>
/* PASSWORD CHECK */
function checkPass() {
    const correctPass = "udi2025";
    const input = document.getElementById("passInput").value;

    if (input === correctPass) {
        document.getElementById("password-screen").style.display = "none";
        document.getElementById("main-content").style.display = "block";
    } else {
        alert("Wrong password!");
    }
}

/* FORM VALIDATION & ANTI-SPAM */
let failCount = 0;
const maxFails = 3;
const lockTime = 10000;

document.getElementById("whitelistForm").addEventListener("submit", function(e){
    e.preventDefault();

    const xInput = document.getElementById("xInput").value.trim();
    const walletInput = document.getElementById("walletInput").value.trim();
    const submitBtn = document.getElementById("submitBtn");

    // Validate X
    if (!xInput.startsWith("@")) {
        alert("X profile must start with @");
        failCount++;
        checkLock();
        return;
    }

    // Validate ETH
    const ethRegex = /^0x[a-fA-F0-9]{40}$/;
    if (!ethRegex.test(walletInput)) {
        alert("Invalid ETH wallet address");
        failCount++;
        checkLock();
        return;
    }

    // Submit
    const form = this;
    fetch(form.action, {
        method: "POST",
        body: new FormData(form)
    })
    .then(() => {
        document.getElementById("success-text").style.display = "block";
        form.reset();
        failCount = 0;
    })
    .catch(err => {
        alert("Error submitting form");
        console.error(err);
    });
});

function checkLock() {
    const submitBtn = document.getElementById("submitBtn");
    if (failCount >= maxFails) {
        submitBtn.disabled = true;
        alert(`Too many failed attempts! Please wait ${lockTime/1000} seconds.`);
        setTimeout(() => {
            failCount = 0;
            submitBtn.disabled = false;
        }, lockTime);
    }
}
</script>

</body>
</html>