<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>$UDI</title>

<!-- Font Special Elite -->
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">

<!-- Favicon -->
<link rel="icon" href="favicon.ico">

<style>
    body {
        margin: 0;
        padding: 0;
        font-family: 'Special Elite', monospace;
        background: url('background.png') no-repeat center center fixed;
        background-size: cover;
    }

    .gif-bg {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        pointer-events: none;
        z-index: 0;
    }

    /* PASSWORD OVERLAY */
    #password-screen {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.65);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 10;
        backdrop-filter: blur(3px);
    }

    #password-screen input {
        padding: 12px;
        font-size: 20px;
        background: rgba(255,255,255,0.1);
        color: white;
        border: 2px solid white;
        border-radius: 12px;
        outline: none;
        font-family: 'Special Elite';
        text-align: center;
        margin-bottom: 20px;
        width: 250px;
        backdrop-filter: blur(6px);
    }

    #password-screen button {
        padding: 10px 25px;
        font-size: 20px;
        background: rgba(255,255,255,0.2);
        color: white;
        border: 2px solid white;
        border-radius: 12px;
        cursor: pointer;
        font-family: 'Special Elite';
        backdrop-filter: blur(4px);
    }

    /* MAIN FORM */
    #main-content {
        display: none;
        position: relative;
        z-index: 5;
        text-align: center;
        padding-top: 100px;
    }

    .form-box {
        padding: 30px;
        width: 300px;
        margin: auto;
        border: 2px solid rgba(255,255,255,0.7);
        border-radius: 15px;
        background: rgba(0,0,0,0.4);
        backdrop-filter: blur(4px);
    }

    .form-box input {
        width: 100%;
        margin-bottom: 15px;
        padding: 12px;
        background: rgba(255,255,255,0.1);
        color: white;
        border: 2px solid white;
        border-radius: 12px;
        outline: none;
        font-size: 16px;
        font-family: 'Special Elite';
        backdrop-filter: blur(6px);
    }

    .form-box button {
        width: 100%;
        padding: 12px;
        background: rgba(255,255,255,0.2);
        border: 2px solid white;
        border-radius: 12px;
        color: white;
        font-size: 18px;
        cursor: pointer;
        font-family: 'Special Elite';
    }

    /* Success text */
    #success-text {
        margin-top: 15px;
        color: #00ffea;
        font-size: 18px;
        display: none;
    }
</style>
</head>

<body>

<!-- GIF BACKGROUND -->
<img src="IMG_1930.gif" class="gif-bg">

<!-- PASSWORD FIRST -->
<div id="password-screen">
    <input type="password" id="passInput" placeholder="Enter Password">
    <button onclick="checkPass()">Enter</button>
</div>

<!-- MAIN FORM -->
<div id="main-content">
    <div class="form-box">
        <h2 style="color:white;">Whitelist Form</h2>

        <form id="whitelistForm" action="https://sheetdb.io/api/v1/YOUR_SHEET_ENDPOINT" method="POST">
            <input type="text" id="xInput" name="data[x]" placeholder="Your X (Twitter) Profile" required>
            <input type="text" id="walletInput" name="data[wallet]" placeholder="Your ETH Wallet" required>
            <button type="submit">Submit</button>
        </form>

        <div id="success-text">Success, welcome UDIverse — good luck!</div>
    </div>
</div>

<script>
/* Password check */
function checkPass() {
    const correctPass = "udi2025";  // đổi mật khẩu ở đây
    const input = document.getElementById("passInput").value;

    if (input === correctPass) {
        document.getElementById("password-screen").style.display = "none";
        document.getElementById("main-content").style.display = "block";
    } else {
        alert("Wrong password!");
    }
}

/* Form validation & submit */
document.getElementById("whitelistForm").addEventListener("submit", function(e){
    e.preventDefault();

    const xInput = document.getElementById("xInput").value.trim();
    const walletInput = document.getElementById("walletInput").value.trim();

    // X profile phải bắt đầu bằng @
    if (!xInput.startsWith("@")) {
        alert("X profile must start with @");
        return;
    }

    // ETH wallet bắt đầu 0x và có 40 ký tự hex
    const ethRegex = /^0x[a-fA-F0-9]{40}$/;
    if (!ethRegex.test(walletInput)) {
        alert("Invalid ETH wallet address");
        return;
    }

    // Nếu hợp lệ thì gửi form
    const form = this;
    fetch(form.action, {
        method: "POST",
        body: new FormData(form)
    })
    .then(() => {
        document.getElementById("success-text").style.display = "block";
        form.reset();
    })
    .catch(err => {
        alert("Error submitting form");
        console.error(err);
    });
});
</script>

</body>
</html>